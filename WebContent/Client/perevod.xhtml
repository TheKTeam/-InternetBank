<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html">
<h:head>
	<h:outputStylesheet library="css" name="style_text.css" />
	<title>Перевод денег между счетами</title>
     <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
   	<script>
		  $(document).ready(function(){
				$('#chat-trigger').click(function(){
					$(this).next('#chat-content').slideToggle();
					$(this).toggleClass('active');					
					
					if ($(this).hasClass('active')) $(this).find('span').html('&#x25B2;')
						else $(this).find('span').html('&#x25BC;')
					})
		  });
	</script>
	
</h:head>
<h:link href="style.css" rel="stylesheet" type="text/css"></h:link>
<h:link href="style_text.css" rel="stylesheet" type="text/css"></h:link>

<h:body>
	<h:form id="formID">
		<table id="tableID" width="100%" border="1">
			<tbody>
				<tr>
					<td width="85%" height="130" class="Лейб">К</td>
					<td>
						<p>
							<label for="textfield">Клиент:</label>
						</p>
						<p align="center">
							<h:inputText type="text" name="textfield" id="textfield"
								value="#{user.currentUser}"></h:inputText>
						</p>
						<p align="right">
							<a href="start_page.xhtml"><h:commandButton value="Выход"
									actionListener="#{user.leave}" action="/start_page"></h:commandButton></a>
						</p>
					</td>

				</tr>
				<tr>
					<td style="position: static;" width="85%" height="785" align="left"
						valign="top">
						<div style="position: relative; height: 500px;">
						<div style="position:relative ;height:190px;overflow-y:scroll; width: 14%; left: 5%; top:4%;">
							<h:dataTable id="listBalance"
								style="position:relative; top: 5; left: 5%; width=15%;"
								border="1" value="#{tableData.accs}" var="accs"
								styleClass="employeeTable" headerClass="employeeTableHeader"
								rowClasses="employeeTableOddRow,employeeTableEvenRow">
								<f:facet name="caption" >Список ваших счетов</f:facet>
								<h:column>
									<f:facet name="header">Счет</f:facet>    				
      #{accs.numberOfAccount}
   </h:column>
								<h:column>
									<f:facet name="header">Баланс</f:facet>
      #{accs.money}
   </h:column>
							</h:dataTable>
</div>
							<span style="position: absolute; top: 5%; left: 30%;"
								class="main_text">Выбраный счет:</span> <span
								style="position: absolute; top: 5%; left: 65%;"
								class="main_text">Сумма перевода: </span> <span
								style="position: absolute; top: 24%; left: 30%;"
								class="main_text"> * <h:inputText type="text" id="selectedAcc" value="#{tableData.selectedAcc}"></h:inputText></span>
							<span style="position: absolute; top: 24%; left: 65%;"
								class="main_text">* <h:inputText type="text" id="money" value="#{tableData.money}"></h:inputText></span>
							<span style="position: absolute; top: 35%; left: 30%;"
								class="main_text">Счет назначения:</span> <span
								style="position: absolute; top: 45%; left: 30%;"
								class="main_text"> * <h:inputText type="text" id="accDestinetion" value="#{tableData.accDestinetion}"></h:inputText>
								<h:commandButton type="button" value="=>" action="#{tableData.showDistination}"  >
								<f:ajax execute="accDestinetion" render="listDestenation"/>
								</h:commandButton>
							</span>
							
							<h:dataTable id="listDestenation" style="position: absolute; top:45% ; left: 60%; "
								width="20%" border="1" value="#{tableData.listDestClient}" var="destClient" >
								<f:facet name="caption">Информация о пользователе</f:facet>
								<h:column>
									<f:facet name="header">Фамилия</f:facet>    				
      #{destClient.secondName}
   </h:column>
								<h:column>
									<f:facet name="header">Имя</f:facet>
      #{destClient.firsName}
   </h:column>
								<h:column>
									<f:facet name="header">Отчество</f:facet>
      #{destClient.otchestvo}
   </h:column>
								
							</h:dataTable>



							<h:commandButton style="position:absolute; top:90%; left:25%;"
								type="button" value="ОТПРАВИТЬ" action="#{tableData.getsendMoney}">
								<f:ajax execute="selectedAcc money accDestinetion" render="listBalance"/>
								</h:commandButton>
							<h:commandButton type="button"
								style="position:absolute; top:90%; left:60%;"
								value="ОЧИСТИТЬ ПОЛЯ"
								action="#{tableData.clearAllFilds}">
								
							<f:ajax render="money selectedAcc accDestinetion"/>	
							</h:commandButton>
							<p style="position: absolute; left: 40%; top: 100%%;">
							<span class="warning"> *- поля обязательные для ввода</span>
							</p>
						</div>
						
      <div style="position: fixed; left: 30px; top: 250px;">
     <nav>
	<ulM>
		<liChat id="chat">
			<a  id="chat-trigger" href="#">
				К о н с у л ь т а н т <span>&#9656;</span>
			</a>
			<div id="chat-content">
				<form>
					<fieldset style="position: relative; height: 225px;" id="inputs">
						<h:inputTextarea readonly="true" value="#{user.messageOnChat}" style="resize: none;" rows="15" cols="60" id="MtextArea"></h:inputTextarea> 
					</fieldset>
					<fieldset id="actions">
					<div >
					<h:inputText id="message" value="#{user.message}" style="resize: none;" cols="60"></h:inputText>
						<h:commandButton type="submit" id="submit" value="Отправить" >
						 <f:ajax execute="message" render="MtextArea"/>
						</h:commandButton>
						</div>
					</fieldset>

				</form>
			</div>                     
		</liChat>
	</ulM>
</nav>
</div>						
						
					</td>
					<td valign="top" class="Rigth_panel">
						<h3 class="Rigth_panel"></h3>
						<h3>
							<a class="Rigth_panel" href="personal_cabinet.xhtml">Личный
								кабинет</a>
						</h3>
						<h3>
							<a class="Rigth_panel" href="sendDeals.xhtml">Предложения и жалобы</a>
						</h3>
						<h3>
							<a class="Rigth_panel" href="uslugi.xhtml">Услуги</a>
						</h3>
					</td>
				</tr>
			</tbody>
		</table>
	</h:form>
</h:body>
</html>
